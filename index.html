<!DOCTYPE html>
<head>
    <title>HTML5 Audio Tutorial</title>
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.3.0/build/cssreset/reset-min.css">
    <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
<!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">    
    
    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css">

    


</head>
<body>
<!-- <iframe id="player" frameborder="0" allowfullscreen="1" title="YouTube video player" width="640" height="390" src="https://www.youtube.com/embed/0Bmhjf0rKe8?enablejsapi=1&amp;origin=http%3A%2F%2Flocalhost%3A3030&amp;widgetid=1"></iframe> -->
<iframe id="player" src="http://www.youtube.com/embed/M7lc1UVf-VE?enablejsapi=1&amp;widgetid=1" frameborder="0"></iframe>
    <script src="http://www.youtube.com/player_api"></script>
        <script src="/socket.io/socket.io.js"></script>

    <script>
        var player;
            var socket = io();

        function onYouTubePlayerAPIReady() {
            player = new YT.Player('player', {
              events: {
                onStateChange: onPlayerStateChange
              }
            });
        }

        // when video ends
        function onPlayerStateChange(event) {     
            if(event.data === YT.PlayerState.PLAYING ) {          
                socket.emit('play');
            }

            if(event.data === YT.PlayerState.PAUSED ) {          
                socket.emit('pause');
            }
        }

        socket.on('play', function(){
            $('#player')[0].contentWindow.postMessage('{"event":"command","func":"' + 'playVideo' + '","args":""}', '*');    

        });


        socket.on('pause', function(){
            $('#player')[0].contentWindow.postMessage('{"event":"command","func":"' + 'pauseVideo' + '","args":""}', '*');    

        });
    </script>
    <script type="text/javascript" src="js/js.js"></script>
</body>
</html>